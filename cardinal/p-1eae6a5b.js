import{g as t}from"./p-9835b40a.js";import{c as n}from"./p-e9e45895.js";function e(t){let n=this;Object.keys(t).forEach((function(e){n[e]=t[e]}))}function l(n,e,l){let o=this;const i=t(o);Array.from(i.attributes).filter(t=>t.name.startsWith(l)).forEach(t=>{const i=t.name.split(l)[1];o[i]=e.getChainValue(n?`${n}.${t.value}`:t.value)})}function o(n,e,l){let o=this;const i=t(o);Array.from(i.attributes).filter(t=>t.value.startsWith(l)).forEach(t=>{const i=t.value.split(l)[1],r=n?`${n}.${i}`:i;o[t.name]=e.getChainValue(r),e.onChange(r,(function(){o[t.name]=e.getChainValue(r)}))})}function i(t,n){try{let e=this;if(e.rootModel){let l=t;return e.parentChain&&(l=`${e.parentChain}.${t}`),e.rootModel.setChainValue(l,n),!0}return!1}catch(e){console.error(e)}return!1}function r(n,e){if(n||!e)return;let i,r,u,c=this,a=t(c);if(null!==a.getAttribute("data-view-model")&&"psk-for-each"===a.tagName.toLowerCase())return i=a.getAttribute("data-view-model"),c.__assignProperties.call(c,{rootModel:e,parentChain:u=i}),void c.render.call(c);if(i=a.getAttribute("view-model"),u=i,null===i&&(null!==(r=null===a.getAttribute("name")||a.getAttribute("name").startsWith("@")?null:a.getAttribute("name"))||null===a.getAttribute("label")||a.getAttribute("label").startsWith("@")||(r=a.getAttribute("label").replace(/( |:|\/|\.|-)/g,"").toLowerCase()),u=r),!i&&!r)return o.call(c,u,e,"@"),l.call(c,u,e,"view-model-"),void c.render.call(c);function s(t,n){c[t]=e.getChainValue(n),e.onChange(n,(function(){c[t]=e.getChainValue(n)}))}if(c.__assignProperties.call(c,{rootModel:e,parentChain:u}),i){let t=e.getChainValue(u);if(!t)return;return Object.keys(t).forEach(t=>{s(t,`${u}.${t}`)}),void function(){const t=`${u}.value`;e.getChainValue(u)&&!e.getChainValue(t)&&s("value",t)}()}}function u(){return function(l){let{componentWillLoad:o,render:u}=l;l.componentWillLoad=function(){let l=t(this);return this.render=u,this.changeModel=i,this.__assignProperties=e,n("getModelEvent",{bubbles:!0,composed:!0,cancellable:!0,detail:{callback:r.bind(this)}},!0,l),o&&o.call(this)}}}export{u as B};