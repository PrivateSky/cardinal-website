var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};System.register(["./p-51da6f80.system.js","./p-fcb31a1e.system.js","./p-a13b0b86.system.js","./p-77f35bd6.system.js"],(function(e){"use strict";var t,r,n,i,a,o,s;return{setters:[function(e){t=e.r;r=e.h;n=e.g},function(e){i=e.T},function(e){a=e.s;o=e.c},function(e){s=e.C}],execute:function(){var p=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a;return i>3&&a&&Object.defineProperty(t,r,a),a};var c=e("psk_page",function(){function e(e){t(this,e);this.activeChapter=null;this.chapters=[];this.title="";this.componentFullyLoaded=false}e.prototype.receiveChapters=function(e){e.stopImmediatePropagation();if(!e.detail){return}var t=Object.assign({},e.detail);var r=function(e){return t.guid===e.guid};var n=this.chapters.findIndex(r);var i=__spreadArrays(this.chapters);if(n===-1){i.push(Object.assign({},t));this.chapters=JSON.parse(JSON.stringify(i));return}i[n]=Object.assign({},t);this.chapters=JSON.parse(JSON.stringify(i))};e.prototype._checkForChapterScrolling=function(){var e=this;if(window.location.href.indexOf("chapter=")===-1){return}var t=window.location.href.split("chapter=")[1];setTimeout((function(){a(t,e.element)}),50)};e.prototype._sendTableOfContentChapters=function(){o("psk-send-toc",{bubbles:true,composed:true,cancelable:true,detail:{chapters:this.chapters,active:this.activeChapter}},true)};e.prototype.componentDidLoad=function(){this.componentFullyLoaded=true;this._checkForChapterScrolling()};e.prototype.render=function(){document.addEventListener("pageScroll",this.handleScrollEvent.bind(this),true);this._sendTableOfContentChapters();return r("div",null,r("nav",null,r("h3",null,this.title)),r("div",{class:"page-content container"},this.componentFullyLoaded?r("slot",null):r("psk-ui-loader",{shouldBeRendered:true})))};e.prototype.handleScrollEvent=function(e){var t=this;e.preventDefault();e.stopImmediatePropagation();var r=e.parentEventData&&e.parentEventData;if(!r){return}this.activeChapter=null;var n=null;var i=0;var a=Array.from(this.element.querySelectorAll("psk-chapter"));a.forEach((function(e){if(n!==null||t.activeChapter!==null){return}var a=e.getAttribute("guid");if(!a){return}var o=e.getElementsByClassName("card psk-card")&&e.getElementsByClassName("card psk-card")[0];var s=0;if(i>=o.offsetTop){s=i+o.offsetTop}else{s=o.offsetTop}var p=r.scrollTop;if(p>=i&&p<=s){n=a;t.activeChapter=n}i=s}));if(a.length>0){this.activeChapter=n?n:a[0].getAttribute("guid")}};Object.defineProperty(e.prototype,"element",{get:function(){return n(this)},enumerable:true,configurable:true});return e}());p([s()],c.prototype,"activeChapter",void 0);p([i({description:"This property will be used as the title for the page.",isMandatory:false,propertyType:"string"})],c.prototype,"title",void 0);p([i({description:"This property is the name of the table of content.",isMandatory:false,propertyType:"string"})],c.prototype,"tocTitle",void 0)}}}));